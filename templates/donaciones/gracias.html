{% extends 'base.html' %}
{% load static %}

{% block title %}Gracias por tu Donación - Protectora Adán{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-8 text-center">
            <!-- Mensaje de agradecimiento -->
            <div class="mb-5">
                <i class="fas fa-heart fa-5x text-success mb-4"></i>
                <h1 class="display-4 fw-bold text-success mb-4">¡Gracias!</h1>
                <p class="lead">Tu donación de <strong>${{ donacion.cantidad|floatformat:0 }} CLP</strong> ha sido procesada.</p>
                {% if donacion.estado == 'completada' %}
                    <div class="alert alert-success">
                        <i class="fas fa-check-circle"></i> <strong>¡Pago Confirmado!</strong> 
                        Tu donación se procesó exitosamente.
                    </div>
                {% elif donacion.estado == 'fallida' %}
                    <div class="alert alert-danger">
                        <i class="fas fa-exclamation-circle"></i> <strong>Pago No Procesado</strong> 
                        Hubo un problema con el procesamiento del pago.
                    </div>
                {% else %}
                    <div class="alert alert-warning">
                        <i class="fas fa-clock"></i> <strong>Pago Pendiente</strong> 
                        Tu donación está siendo procesada.
                    </div>
                {% endif %}
                <p class="text-muted">Gracias a tu generosidad, podemos seguir rescatando y cuidando perros abandonados.</p>
            </div>

            <!-- Detalles de la donación -->
            <div class="card mb-5">
                <div class="card-header bg-success text-white">
                    <h4 class="mb-0"><i class="fas fa-receipt"></i> Detalles de tu Donación</h4>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6 text-start">
                            <p><strong>Tipo de donación:</strong> {{ donacion.tipo_donacion.nombre }}</p>
                            <p><strong>Cantidad:</strong> ${{ donacion.cantidad|floatformat:0 }} CLP</p>
                            <p><strong>Fecha:</strong> {{ donacion.fecha_donacion|date:"d/m/Y H:i" }}</p>
                            {% if donacion.authorization_code %}
                            <p><strong>Código de autorización:</strong> {{ donacion.authorization_code }}</p>
                            {% endif %}
                        </div>
                        <div class="col-md-6 text-start">
                            {% if not donacion.anonimo %}
                            <p><strong>Donante:</strong> {{ donacion.nombre_donante }}</p>
                            {% else %}
                            <p><strong>Donante:</strong> Anónimo</p>
                            {% endif %}
                            <p><strong>Estado:</strong> 
                                {% if donacion.estado == 'completada' %}
                                    <span class="badge bg-success">{{ donacion.get_estado_display }}</span>
                                {% elif donacion.estado == 'fallida' %}
                                    <span class="badge bg-danger">{{ donacion.get_estado_display }}</span>
                                {% else %}
                                    <span class="badge bg-warning">{{ donacion.get_estado_display }}</span>
                                {% endif %}
                            </p>
                            {% if donacion.buy_order %}
                            <p><strong>Orden de compra:</strong> {{ donacion.buy_order }}</p>
                            {% endif %}
                        </div>
                    </div>
                    
                    {% if donacion.mensaje %}
                    <div class="mt-3">
                        <p><strong>Tu mensaje:</strong></p>
                        <p class="fst-italic">"{{ donacion.mensaje }}"</p>
                    </div>
                    {% endif %}
                </div>
            </div>

            <!-- Qué pasa ahora -->
            <div class="row mb-5">
                <div class="col-12">
                    <h3 class="mb-4">¿Qué pasa ahora?</h3>
                    <div class="row g-4">
                        <div class="col-md-4">
                            <div class="card border-0 bg-light h-100">
                                <div class="card-body text-center">
                                    <i class="fas fa-envelope fa-3x text-primary mb-3"></i>
                                    <h5>Confirmación por Email</h5>
                                    <p class="text-muted">Recibirás un recibo detallado en tu correo electrónico.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card border-0 bg-light h-100">
                                <div class="card-body text-center">
                                    <i class="fas fa-credit-card fa-3x text-success mb-3"></i>
                                    <h5>Procesamiento</h5>
                                    <p class="text-muted">Tu donación será procesada en las próximas 24-48 horas.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card border-0 bg-light h-100">
                                <div class="card-body text-center">
                                    <i class="fas fa-dog fa-3x text-warning mb-3"></i>
                                    <h5>Ayuda Directa</h5>
                                    <p class="text-muted">Tu contribución se utilizará inmediatamente para el cuidado de nuestros perros.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Impacto de la donación -->
            <div class="card mb-5 border-info">
                <div class="card-header bg-info text-white">
                    <h4 class="mb-0"><i class="fas fa-paw"></i> El Impacto de tu Donación</h4>
                </div>
                <div class="card-body">
                    <p class="text-start">Con tu donación de <strong>${{ donacion.cantidad|floatformat:0 }} CLP</strong> podremos:</p>
                    <div class="row">
                        {% if donacion.cantidad >= 10000 and donacion.cantidad < 25000 %}
                        <div class="col-md-6">
                            <ul class="text-start">
                                <li>Alimentar a un perro durante 1 semana</li>
                                <li>Comprar juguetes y accesorios básicos</li>
                            </ul>
                        </div>
                        {% elif donacion.cantidad >= 25000 and donacion.cantidad < 50000 %}
                        <div class="col-md-6">
                            <ul class="text-start">
                                <li>Alimentar a un perro durante 1 mes</li>
                                <li>Desparasitación completa</li>
                                <li>Medicamentos básicos</li>
                            </ul>
                        </div>
                        {% elif donacion.cantidad >= 50000 and donacion.cantidad < 100000 %}
                        <div class="col-md-6">
                            <ul class="text-start">
                                <li>Vacunación completa de un perro</li>
                                <li>Alimentación por 2 meses</li>
                                <li>Tratamiento veterinario básico</li>
                            </ul>
                        </div>
                        {% elif donacion.cantidad >= 100000 %}
                        <div class="col-md-6">
                            <ul class="text-start">
                                <li>Esterilización de un perro</li>
                                <li>Alimentación por 4 meses</li>
                                <li>Tratamiento médico especializado</li>
                            </ul>
                        </div>
                        {% endif %}
                        <div class="col-md-6">
                            <p class="text-muted fst-italic">
                                "Cada peso cuenta y hace la diferencia en la vida de nuestros rescatados. 
                                Gracias por ser parte de nuestra familia."
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Acciones adicionales -->
            <div class="row">
                <div class="col-12">
                    <h3 class="mb-4">¿Quieres seguir ayudando?</h3>
                    <div class="d-flex flex-wrap gap-3 justify-content-center">
                        <a href="{% url 'adopciones:lista_perros' %}" class="btn btn-primary">
                            <i class="fas fa-heart"></i> Adoptar un Perro
                        </a>
                        <a href="{% url 'core:voluntariado' %}" class="btn btn-outline-primary">
                            <i class="fas fa-hands-helping"></i> Ser Voluntario
                        </a>
                        <a href="{% url 'donaciones:donar' %}" class="btn btn-success">
                            <i class="fas fa-donate"></i> Donar Nuevamente
                        </a>
                    </div>
                </div>
            </div>

            <!-- Redes sociales -->
            <div class="mt-5">
                <h4>Comparte nuestra causa</h4>
                <p class="text-muted">Ayúdanos a llegar a más personas compartiendo nuestro trabajo en redes sociales.</p>
                <div class="d-flex gap-3 justify-content-center">
                    <a href="#" class="btn btn-outline-primary">
                        <i class="fab fa-facebook"></i> Facebook
                    </a>
                    <a href="#" class="btn btn-outline-info">
                        <i class="fab fa-twitter"></i> Twitter
                    </a>
                    <a href="#" class="btn btn-outline-danger">
                        <i class="fab fa-instagram"></i> Instagram
                    </a>
                    <a href="#" class="btn btn-outline-success">
                        <i class="fab fa-whatsapp"></i> WhatsApp
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
